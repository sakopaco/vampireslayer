Sjasm Z80 Assembler v0.42c - www.xl2s.tk             [2021.06.08 - 22:07:29]

t4.asm
Errors: 0

       1   00:0000                      	OUTPUT	"t4.bin"
       2   00:8200                      	
       3   00:8200                      ;;=====================================================
       4   00:8200                      ;;DEFINICIÓN DE CONSTANTES
       5   00:8200                      ;;=====================================================	
       6   00:8200                      	include "constantes.asm"
       1.  00:8200                      ;;=====================================================
       2.  00:8200                      ;; FICHERO constantes.asm
       3.  00:8200                      ;;=====================================================
       4.  00:8200                      
       5.  00:8200                      ;;ETIQUETAS/CONSTANTES BIOS TECLADO
       6.  00:8200  (00:00D8)           GTTRIG	equ		#00D8	;Returns current trigger status
       7.  00:8200  (00:00D5)           GTSTCK	equ		#00D5	;Returns the joystick/cursors status
       8.  00:8200  (00:F3DB)           CLIKSW	equ		#F3DB	;deshabilita el sonido de clic cuando se pulsa una tecla
       9.  00:8200                      
      10.  00:8200                      ;;ETIQUETAS/CONSTANTES BIOS VDP
      11.  00:8200  (00:013E)           RDVDP	equ		#013E	;lee registro status VDP
      12.  00:8200  (00:0047)           WRTVDP	equ		#0047	;escribe registros del VDP
      13.  00:8200  (00:005C)           LDIRVM	equ		#005C	;RAM/ROM -> VRAM
      14.  00:8200  (00:0059)           LDIRMV	equ		#0059	;VRAM -> RAM
      15.  00:8200  (00:005F)           CHGMOD	equ		#005F	;cambia modo pantalla (screen mode)
      16.  00:8200  (00:0041)           DISSCR  equ		#0041	;desactiva pantanlla
      17.  00:8200  (00:0044)           ENASCR  equ		#0044	;activa pantalla
      18.  00:8200  (00:0062)           CHGCLR  equ		#0062	;cambia color de pantalla (toca A y direcciones)
      19.  00:8200  (00:F3E9)           FORCLR	equ		#F3E9	;zona memoria color foreground
      20.  00:8200  (00:F3EA)           BAKCLR  equ		#F3EA	;zona memoria color background
      21.  00:8200  (00:F3EB)           BDRCLR 	equ		#F3EB	;zona memoria bordercolor
      22.  00:8200  (00:00C3)           CLS		equ		#00C3	;limpia pantalla (necesita A=0)
      23.  00:8200                      
      24.  00:8200                      
      25.  00:8200  (00:00C0)           BEEP	equ		#00C0	;toca todos los registros
      26.  00:8200                      
       7   00:8200                      
       8   00:8200                      ;;=====================================================
       9   00:8200                      ;;DEFINICIÓN DE CABECERA DE ARCHIVO BIN
      10   00:8200                      ;;=====================================================		
      11   00:8200                      	include "cabecerabin.asm"
       1.  00:8200                      ;;=====================================================
       2.  00:8200                      ;; FICHERO cabecera.asm
       3.  00:8200                      ;;=====================================================
       4.  00:8200                      
       5.  00:8200                      ;;CABECERA FICHERO BIN
       6.  00:8200  FE                  	DB	#FE
       7.  00:8201  00 82               	DW	START
       8.  00:8203  72 96               	DW	END
       9.  00:8205  00 82               	DW	START
      10.  00:8207                      
      11.  00:8207                      ;;INICIO CÓDIGO PROGRAMA	
      12.  00:8207                      	ORG	#8200
      13.  00:8200                      	
      12   00:8200                      	
      13   00:8200                      START:
      14   00:8200                      	
      15   00:8200                      		;toca A
      16   00:8200                      limpia_pantalla:
      17   00:8200  AF                  	XOR			A
      18   00:8201  CD C3 00            	CALL 		CLS
      19   00:8204                      fin_limpia_pantalla:
      20   00:8204                      	;toca A y direcciones #F3E9/#F3EA/#F3EB
      21   00:8204                      set_color:
      22   00:8204  3E 02               	LD		 A,2				;verde oscuro
      23   00:8206  32 E9 F3            	LD 		(FORCLR),A
      24   00:8209  3E 01               	LD		 A,1				;negro
      25   00:820B  32 EA F3            	LD 		(BAKCLR),A
      26   00:820E  3E 01               	LD		 A,1				;negro
      27   00:8210  32 EB F3            	LD 		(BDRCLR),A
      28   00:8213  CD 62 00            	CALL	CHGCLR  
      29   00:8216                      fin_set_color:
      30   00:8216                      	
      31   00:8216                      	;cambiamos a SCREEN 2,2 del BASIC
      32   00:8216                      	;toca A
      33   00:8216  3E 02               	LD		 A,2
      34   00:8218  CD 5F 00            	CALL	CHGMOD			;selecciona screen 2
      35   00:821B                      	
      36   00:821B                      		;cargamos los patrones
      37   00:821B  21 72 85            	LD		HL,tiles_patrones_pantalla
      38   00:821E  11 00 00            	LD		DE,#0000
      39   00:8221  01 00 08            	LD		BC,256*8*1
      40   00:8224  CD 5C 00            	CALL	LDIRVM		
      41   00:8227                      	
      42   00:8227                      	;cargamos mapa de pantalla
      43   00:8227  21 72 95            	LD		HL,tiles_mapa_pantalla
      44   00:822A  11 00 18            	LD		DE,#1800
      45   00:822D  01 00 01            	LD		BC,256*1
      46   00:8230  CD 5C 00            	CALL	LDIRVM
      47   00:8233                      	
      48   00:8233                      	;cargamos los colores de los patrones
      49   00:8233  21 72 8D            	LD		HL,tiles_color_pantalla
      50   00:8236  11 00 20            	LD		DE,#2000
      51   00:8239  01 00 08            	LD		BC,256*8*1
      52   00:823C  CD 5C 00            	CALL	LDIRVM
      53   00:823F                      	
      54   00:823F                      loop_principal:
      55   00:823F                      	
      56   00:823F  00                  	NOP
      57   00:8240                      	
      58   00:8240  C3 3F 82            	JP		loop_principal
      59   00:8243                      	
      60   00:8243  C9                  	RET
      61   00:8244                      	
      62   00:8244                      ;;=====================================================
      63   00:8244                      ;;DEFINICIÓN DE ESTRUCTURAS
      64   00:8244                      ;;=====================================================		
      65   00:8244                      	include "estructuras.asm"
       1.  00:8244                      ;;=====================================================
       2.  00:8244                      ;;DEFINICIÓN DE ESTRUCTURAS
       3.  00:8244                      ;;=====================================================
       4.  00:8244                      
       5.  00:8244                      	STRUCT ESTRUCTURA_PUNTOMIRA
       6.  00:8244                    < posx		DB		0
       7.  00:8244                    < posy		DB		0
       8.  00:8244                    < color		DB		0
       9.  00:8244                    < retardo		DB		0
      10.  00:8244                    < 	ENDSTRUCT;ESTRUCTURA_PUNTOMIRA
      11.  00:8244                      	
      12.  00:8244                      	STRUCT ESTRUCTURA_ENEMIGO
      13.  00:8244                    < existe		DB		0			;0 no existe y 1 existe (así recorro el array y sólo actuo en los enemigos creados no muertos)
      14.  00:8244                    < tipo		DB		0			;(0 serpiente)
      15.  00:8244                    < posx		DB		50
      16.  00:8244                    < posy		DB		50
      17.  00:8244                    < color		DB		5
      18.  00:8244                    < paso		DB		0			;paso 0 o 1 (2 escenas)
      19.  00:8244                    < retardo		DB		0			;entre 0 y 9
      20.  00:8244                    < energia		DB		0			;energía del enemigo... si llega a 0 => existe <- 0
      21.  00:8244                    < 	ENDSTRUCT;ESTRUCTURA_PUNTOMIRAA
      66   00:8244                      	
      67   00:8244                      ;;=====================================================
      68   00:8244                      ;;DEFINICIÓN DE VARIABLES
      69   00:8244                      ;;=====================================================		
      70   00:8244                      	include "sprites.asm"
       1.  00:8244                      ;;=====================================================
       2.  00:8244                      ;;DEFINICIÓN DE SPRITES
       3.  00:8244                      ;;=====================================================	
       4.  00:8244                      sprites_pantantalla:
       5.  00:8244                      
       6.  00:8244                      sprite_punto_mira:
       7.  00:8244                      	db  #00,#01,#0F,#11,#20,#24,#20,#71
       7.  00:8244  00 01 0F 11 20 24 20 71 
       8.  00:824C                      	db  #71,#20,#24,#20,#11,#0F,#01,#00
       8.  00:824C  71 20 24 20 11 0F 01 00 
       9.  00:8254                      	db  #00,#80,#F0,#88,#04,#24,#04,#8E
       9.  00:8254  00 80 F0 88 04 24 04 8E 
      10.  00:825C                      	db  #8E,#04,#24,#04,#88,#F0,#80,#00
      10.  00:825C  8E 04 24 04 88 F0 80 00 
      11.  00:8264                      	
      12.  00:8264                      sprite_punto_mira_disp:
      13.  00:8264                      	DB  #FF,#FF,#FF,#FF,#FF,#FF,#FF,#FF
      13.  00:8264  FF FF FF FF FF FF FF FF 
      14.  00:826C                      	DB  #FF,#FF,#FF,#FF,#FF,#FF,#FF,#FF
      14.  00:826C  FF FF FF FF FF FF FF FF 
      15.  00:8274                      	DB  #FF,#FF,#FF,#FF,#FF,#FF,#FF,#FF
      15.  00:8274  FF FF FF FF FF FF FF FF 
      16.  00:827C                      	DB  #FF,#FF,#FF,#FF,#FF,#FF,#FF,#FF
      16.  00:827C  FF FF FF FF FF FF FF FF 
      17.  00:8284                      	
      18.  00:8284                      serpiente_paso1:
      19.  00:8284                      	DB #00,#00,#00,#00,#00,#00,#00,#10
      19.  00:8284  00 00 00 00 00 00 00 10 
      20.  00:828C                      	DB #30,#20,#60,#70,#38,#1C,#1F,#0F
      20.  00:828C  30 20 60 70 38 1C 1F 0F 
      21.  00:8294                      	DB #00,#38,#7C,#76,#7E,#7C,#FA,#C1
      21.  00:8294  00 38 7C 76 7E 7C FA C1 
      22.  00:829C                      	DB #E0,#60,#70,#78,#3C,#1C,#F8,#F8
      22.  00:829C  E0 60 70 78 3C 1C F8 F8 
      23.  00:82A4                      
      24.  00:82A4                      serpiente_paso2:
      25.  00:82A4                      	DB #00,#00,#00,#00,#00,#00,#01,#05
      25.  00:82A4  00 00 00 00 00 00 01 05 
      26.  00:82AC                      	DB #1C,#30,#30,#30,#38,#1C,#1F,#0F
      26.  00:82AC  1C 30 30 30 38 1C 1F 0F 
      27.  00:82B4                      	DB #00,#70,#F8,#EC,#FC,#F8,#F5,#C2
      27.  00:82B4  00 70 F8 EC FC F8 F5 C2 
      28.  00:82BC                      	DB #E0,#60,#70,#38,#18,#1C,#F8,#F0
      28.  00:82BC  E0 60 70 38 18 1C F8 F0 
      71   00:82C4                      	
      72   00:82C4                      	include "habitaciones.asm"
       1.  00:82C4                      ;;=====================================================
       2.  00:82C4                      ;;DEFINICIÓN DE HABITACIONES x NIVEL
       3.  00:82C4                      ;;=====================================================	
       4.  00:82C4                      
       5.  00:82C4                      habitaciones:
       6.  00:82C4                      
       7.  00:82C4                      habitaciones_nivel1:
       8.  00:82C4                      	dw  #00,#00,#00,#00,#00,#00,#00 ;(primera fila)
       8.  00:82C4  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       9.  00:82D2                      	dw  #00,#00,#00,#00,#00,#00,#00
       9.  00:82D2  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      10.  00:82E0                      	dw  #00,#00,#00,#00,#00,#00,#00
      10.  00:82E0  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      11.  00:82EE                      	dw  #00,#00,#00,#00,#00,#00,#00
      11.  00:82EE  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      12.  00:82FC                      	dw  #00,#00,#00,#00,#00,#00,#00
      12.  00:82FC  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      13.  00:830A                      	dw  #00,#00,#00,#00,#00,#00,#00
      13.  00:830A  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      14.  00:8318                      	dw  #00,#00,#00,#00,#00,#00,#00 ;(última fila)
      14.  00:8318  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      15.  00:8326                      	
      16.  00:8326                      habitaciones_nivel2:
      17.  00:8326                      	dw  #00,#00,#00,#00,#00,#00,#00 ;(primera fila)
      17.  00:8326  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      18.  00:8334                      	dw  #00,#00,#00,#00,#00,#00,#00
      18.  00:8334  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      19.  00:8342                      	dw  #00,#00,#00,#00,#00,#00,#00
      19.  00:8342  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      20.  00:8350                      	dw  #00,#00,#00,#00,#00,#00,#00
      20.  00:8350  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      21.  00:835E                      	dw  #00,#00,#00,#00,#00,#00,#00
      21.  00:835E  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      22.  00:836C                      	dw  #00,#00,#00,#00,#00,#00,#00
      22.  00:836C  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      23.  00:837A                      	dw  #00,#00,#00,#00,#00,#00,#00 ;(última fila)
      23.  00:837A  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      24.  00:8388                      	
      25.  00:8388                      habitaciones_nivel3:
      26.  00:8388                      	dw  #00,#00,#00,#00,#00,#00,#00 ;(primera fila)
      26.  00:8388  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      27.  00:8396                      	dw  #00,#00,#00,#00,#00,#00,#00
      27.  00:8396  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      28.  00:83A4                      	dw  #00,#00,#00,#00,#00,#00,#00
      28.  00:83A4  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      29.  00:83B2                      	dw  #00,#00,#00,#00,#00,#00,#00
      29.  00:83B2  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      30.  00:83C0                      	dw  #00,#00,#00,#00,#00,#00,#00
      30.  00:83C0  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      31.  00:83CE                      	dw  #00,#00,#00,#00,#00,#00,#00
      31.  00:83CE  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      32.  00:83DC                      	dw  #00,#00,#00,#00,#00,#00,#00 ;(última fila)
      32.  00:83DC  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      33.  00:83EA                      	
      34.  00:83EA                      habitaciones_nivel4:
      35.  00:83EA                      	dw  #00,#00,#00,#00,#00,#00,#00 ;(primera fila)
      35.  00:83EA  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      36.  00:83F8                      	dw  #00,#00,#00,#00,#00,#00,#00
      36.  00:83F8  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      37.  00:8406                      	dw  #00,#00,#00,#00,#00,#00,#00
      37.  00:8406  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      38.  00:8414                      	dw  #00,#00,#00,#00,#00,#00,#00
      38.  00:8414  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      39.  00:8422                      	dw  #00,#00,#00,#00,#00,#00,#00
      39.  00:8422  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      40.  00:8430                      	dw  #00,#00,#00,#00,#00,#00,#00
      40.  00:8430  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      41.  00:843E                      	dw  #00,#00,#00,#00,#00,#00,#00 ;(última fila)
      41.  00:843E  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      42.  00:844C                      	
      43.  00:844C                      habitaciones_nivel5:
      44.  00:844C                      	dw  #00,#00,#00,#00,#00,#00,#00 ;(primera fila)
      44.  00:844C  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      45.  00:845A                      	dw  #00,#00,#00,#00,#00,#00,#00
      45.  00:845A  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      46.  00:8468                      	dw  #00,#00,#00,#00,#00,#00,#00
      46.  00:8468  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      47.  00:8476                      	dw  #00,#00,#00,#00,#00,#00,#00
      47.  00:8476  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      48.  00:8484                      	dw  #00,#00,#00,#00,#00,#00,#00
      48.  00:8484  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      49.  00:8492                      	dw  #00,#00,#00,#00,#00,#00,#00
      49.  00:8492  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      50.  00:84A0                      	dw  #00,#00,#00,#00,#00,#00,#00 ;(última fila)
      50.  00:84A0  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      51.  00:84AE                      	
      52.  00:84AE                      habitaciones_nivel6:
      53.  00:84AE                      	dw  #00,#00,#00,#00,#00,#00,#00 ;(primera fila)
      53.  00:84AE  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      54.  00:84BC                      	dw  #00,#00,#00,#00,#00,#00,#00
      54.  00:84BC  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      55.  00:84CA                      	dw  #00,#00,#00,#00,#00,#00,#00
      55.  00:84CA  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      56.  00:84D8                      	dw  #00,#00,#00,#00,#00,#00,#00
      56.  00:84D8  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      57.  00:84E6                      	dw  #00,#00,#00,#00,#00,#00,#00
      57.  00:84E6  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      58.  00:84F4                      	dw  #00,#00,#00,#00,#00,#00,#00
      58.  00:84F4  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      59.  00:8502                      	dw  #00,#00,#00,#00,#00,#00,#00 ;(última fila)
      59.  00:8502  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      60.  00:8510                      	
      61.  00:8510                      habitaciones_nivel7:
      62.  00:8510                      	dw  #00,#00,#00,#00,#00,#00,#00 ;(primera fila)
      62.  00:8510  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      63.  00:851E                      	dw  #00,#00,#00,#00,#00,#00,#00
      63.  00:851E  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      64.  00:852C                      	dw  #00,#00,#00,#00,#00,#00,#00
      64.  00:852C  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      65.  00:853A                      	dw  #00,#00,#00,#00,#00,#00,#00
      65.  00:853A  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      66.  00:8548                      	dw  #00,#00,#00,#00,#00,#00,#00
      66.  00:8548  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      67.  00:8556                      	dw  #00,#00,#00,#00,#00,#00,#00
      67.  00:8556  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      68.  00:8564                      	dw  #00,#00,#00,#00,#00,#00,#00 ;(última fila)
      68.  00:8564  00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      73   00:8572                      	
      74   00:8572                      ;;=====================================================
      75   00:8572                      ;;DEFINICIÓN DE PANTALLAS
      76   00:8572                      ;;=====================================================		
      77   00:8572  (0800)              tiles_patrones_pantalla:	incbin "pan1_23.til.bank0.bin.chr"
      78   00:8D72  (0800)              tiles_color_pantalla:		incbin "pan1_23.til.bank0.bin.clr"
      79   00:9572  (0100)              tiles_mapa_pantalla:		incbin "pan1_23.map.bank0.bin"
      80   00:9672                      	
      81   00:9672                      
      82   00:9672                      END:

    LABELS
-------------------------------------------------
00:000000D8 X GTTRIG
00:000000D5 X GTSTCK
00:0000F3DB X CLIKSW
00:0000013E X RDVDP
00:00000047 X WRTVDP
00:0000005C   LDIRVM
00:00000059 X LDIRMV
00:0000005F   CHGMOD
00:00000041 X DISSCR
00:00000044 X ENASCR
00:00000062   CHGCLR
00:0000F3E9   FORCLR
00:0000F3EA   BAKCLR
00:0000F3EB   BDRCLR
00:000000C3   CLS
00:000000C0 X BEEP
00:00008200   START
00:00008200 X limpia_pantalla
00:00008204 X fin_limpia_pantalla
00:00008204 X set_color
00:00008216 X fin_set_color
00:0000823F   loop_principal
00:00000000 X ESTRUCTURA_PUNTOMIRA.posx
00:00000001 X ESTRUCTURA_PUNTOMIRA.posy
00:00000002 X ESTRUCTURA_PUNTOMIRA.color
00:00000003 X ESTRUCTURA_PUNTOMIRA.retardo
00:00000004 X ESTRUCTURA_PUNTOMIRA
00:00000000 X ESTRUCTURA_ENEMIGO.existe
00:00000001 X ESTRUCTURA_ENEMIGO.tipo
00:00000002 X ESTRUCTURA_ENEMIGO.posx
00:00000003 X ESTRUCTURA_ENEMIGO.posy
00:00000004 X ESTRUCTURA_ENEMIGO.color
00:00000005 X ESTRUCTURA_ENEMIGO.paso
00:00000006 X ESTRUCTURA_ENEMIGO.retardo
00:00000007 X ESTRUCTURA_ENEMIGO.energia
00:00000008 X ESTRUCTURA_ENEMIGO
00:00008244 X sprites_pantantalla
00:00008244 X sprite_punto_mira
00:00008264 X sprite_punto_mira_disp
00:00008284 X serpiente_paso1
00:000082A4 X serpiente_paso2
00:000082C4 X habitaciones
00:000082C4 X habitaciones_nivel1
00:00008326 X habitaciones_nivel2
00:00008388 X habitaciones_nivel3
00:000083EA X habitaciones_nivel4
00:0000844C X habitaciones_nivel5
00:000084AE X habitaciones_nivel6
00:00008510 X habitaciones_nivel7
00:00008572   tiles_patrones_pantalla
00:00008D72   tiles_color_pantalla
00:00009572   tiles_mapa_pantalla
00:00009672   END


 Output: t4.out
-------------------------------------------------

 Page: 00
  Org: 00008200  Size: *  Used: 00000000

    No output

 Output: t4.bin
-------------------------------------------------

 Page: 00
  Org: 00008200  Size: *  Used: 00001479

   Address   Length Align   Label
   00008200    5241         START
